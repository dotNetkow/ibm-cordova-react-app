(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{177:function(t,e,n){"use strict";n.r(e);var a=n(1),r=n.n(a),c=n(67),i=n.n(c),s=(n(74),n(4)),u=n(5),o=n(6),l=n(8),d=n(7),m=n(9),h=n(2),b=n(10),f=n(3),k=n.n(f),j=function(t){function e(t){var n;return Object(u.a)(this,e),(n=Object(l.a)(this,Object(d.a)(e).call(this,t))).onTrackClick=n.onTrackClick.bind(Object(h.a)(Object(h.a)(n))),n}return Object(m.a)(e,t),Object(o.a)(e,[{key:"onTrackClick",value:function(t){this.props.setTrackRun()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"All Runs"),r.a.createElement("ul",null,this.props.runList.map(function(t){var e=k()(t.startDateTime,t.endDateTime);return r.a.createElement("li",null,Object(b.format)(t.startDateTime,"dd/MM/yyyy"),r.a.createElement("br",null),Object(b.format)(e,"mm:ss:SSS"),r.a.createElement("br",null),t.distance," m")})),r.a.createElement("button",{onClick:this.onTrackClick},"Track Run"))}}]),e}(a.Component),p=function(t){function e(){return Object(u.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(o.a)(e,[{key:"render",value:function(){var t=this,e=this.props.runList.find(function(e){return e.id===t.props.selectedRunId});if(!e)return null;var n=k()(e.startDateTime,e.endDateTime);return r.a.createElement("div",null,r.a.createElement("h1",null,"Run Detail"),r.a.createElement("div",null,r.a.createElement("dl",null,r.a.createElement("dt",null,"Duration: ",Object(b.format)(n,"mm:ss:SSS"),r.a.createElement("br",null),"Distance: ",e.distance," m"),r.a.createElement("dd",null,Object(b.format)(e.startDateTime,"dd/MM/yyyy")))))}}]),e}(a.Component),O=function(t){return t*Math.PI/180},g=6371;function v(){return window.crypto?([1e7].toString()+-1e3.toString()+-4e3.toString()+-8e3.toString()+-1e11.toString()).replace(/[018]/g,function(t){return(t^window.crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)}):((1e17*Math.random()).toString().match(/.{4}/g)||[]).join("-")}var T=function(t){function e(t){var n;return Object(u.a)(this,e),(n=Object(l.a)(this,Object(d.a)(e).call(this,t))).state={startDateTime:null,endDateTime:null,coordinateList:[],distance:0},n.mapRef=r.a.createRef(),n.startTracking=n.startTracking.bind(Object(h.a)(Object(h.a)(n))),n.stopTracking=n.stopTracking.bind(Object(h.a)(Object(h.a)(n))),n.saveRun=n.saveRun.bind(Object(h.a)(Object(h.a)(n))),n.reset=n.reset.bind(Object(h.a)(Object(h.a)(n))),n}return Object(m.a)(e,t),Object(o.a)(e,[{key:"startTracking",value:function(){var t=this;this.geolocator=navigator.geolocation.watchPosition(function(e){if(null!=e.coords&&null!=t.map){t.setState(function(t){var n=t.coordinateList[t.coordinateList.length-1],a=[e.coords.latitude,e.coords.longitude],r=t.distance;n&&(r+=function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=O(e[0]-t[0]),r=Math.sin(a/2),c=O(e[1]-t[1]),i=Math.sin(c/2),s=r*r+Math.cos(O(t[1]))*Math.cos(O(e[1]))*i*i,u=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)),o=g*u;return n&&(o/=1.60934),o}(n,a));var c=new Date;return Object(s.a)({},t,{distance:r,coordinateList:t.coordinateList.concat([a]),startDateTime:c})});var n=new google.maps.LatLng(e.coords.latitude,e.coords.longitude);t.map.setCenter(n)}},function(){},{enableHighAccuracy:!0})}},{key:"componentDidMount",value:function(){this.map=new google.maps.Map(this.mapRef.current,{center:{lat:-34.397,lng:150.644},zoom:8})}},{key:"stopTracking",value:function(){var t=new Date;this.setState(function(e){return Object(s.a)({},e,{endDateTime:t})}),navigator.geolocation.clearWatch(this.geolocator)}},{key:"saveRun",value:function(){this.state.startDateTime&&this.state.endDateTime&&this.state.distance&&this.props.addRun({id:"new",startDateTime:this.state.startDateTime,endDateTime:this.state.endDateTime,coordinateList:this.state.coordinateList,distance:this.state.distance})}},{key:"reset",value:function(){}},{key:"render",value:function(){var t=this.state.startDateTime&&this.state.endDateTime?k()(this.state.startDateTime,this.state.endDateTime):0;return r.a.createElement("div",null,r.a.createElement("h1",null,"Track Run"),r.a.createElement("div",{ref:this.mapRef,style:{height:"600px",width:"300px"}}),r.a.createElement("footer",null,r.a.createElement("dl",null,r.a.createElement("dt",null,Object(b.format)(t,"mm:ss:SSS"),r.a.createElement("br",null),this.state.distance," m")),r.a.createElement("div",null,r.a.createElement("button",{onClick:this.startTracking},"Start")),r.a.createElement("div",null,r.a.createElement("button",{onClick:this.stopTracking},"Stop"),r.a.createElement("button",{onClick:this.saveRun},"Save"),r.a.createElement("button",{onClick:this.reset},"Reset"))))}}]),e}(a.Component),R=function(t){function e(t){var n;return Object(u.a)(this,e),(n=Object(l.a)(this,Object(d.a)(e).call(this,t))).state={page:"home",selectedRunId:null,runList:[]},n.addRun=n.addRun.bind(Object(h.a)(Object(h.a)(n))),n.setSelectedRun=n.setSelectedRun.bind(Object(h.a)(Object(h.a)(n))),n.setTrackRun=n.setTrackRun.bind(Object(h.a)(Object(h.a)(n))),n.goBackHome=n.goBackHome.bind(Object(h.a)(Object(h.a)(n))),n}return Object(m.a)(e,t),Object(o.a)(e,[{key:"addRun",value:function(t){var e=Object(s.a)({},t,{id:v()});this.setState(function(t){return Object(s.a)({},t,{runList:t.runList.concat(e)})})}},{key:"setSelectedRun",value:function(t){this.setState(function(e){return Object(s.a)({},e,{selectedRunId:t,page:"detail"})})}},{key:"setTrackRun",value:function(){this.setState(function(t){return Object(s.a)({},t,{page:"track"})})}},{key:"goBackHome",value:function(){this.setState(function(t){return Object(s.a)({},t,{page:"home"})})}},{key:"render",value:function(){var t=this;return r.a.createElement("div",null,r.a.createElement("header",null,"home"!==this.state.page?r.a.createElement("button",{onClick:this.goBackHome},"< Home"):null,"React Run Mapper"),function(e){switch(e){case"track":return r.a.createElement(T,{addRun:t.addRun});case"detail":return r.a.createElement(p,{runList:t.state.runList,selectedRunId:t.state.selectedRunId||""});default:return r.a.createElement(j,{runList:t.state.runList,setSelectedRun:t.setSelectedRun,setTrackRun:t.setTrackRun})}}(this.state.page))}}]),e}(a.Component);i.a.render(r.a.createElement(R,null),document.getElementById("root"))},68:function(t,e,n){t.exports=n(177)},74:function(t,e,n){}},[[68,2,1]]]);
//# sourceMappingURL=main.4e4424a9.chunk.js.map